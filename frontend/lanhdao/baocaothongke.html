<!-- File: lanhdao/baocaothongke.html -->
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Hệ thống Quản lý Văn bản &amp; Điều hành • Báo cáo & Thống kê (Lãnh đạo)
    </title>
    <!-- App theme overrides -->
    <link rel="stylesheet" href="../assets/css/styles.css" />
    <!-- Chart.js (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  </head>
  <body class="bg-slate-100 text-slate-800" data-role="lanhdao" data-root="..">
    <!-- ========================= HEADER ========================= -->
    <div data-include="header"></div>

    <!-- ========================= SHELL ========================= -->
    <div class="pt-14">
      <div class="flex">
        <!-- ====== SIDEBAR ====== -->
        <div data-include="sidebar"></div>

        <!-- ====== MAIN ====== -->
        <main class="w-full">
          <div class="max-w-none px-6 lg:px-8 py-6 lg:py-7">
            <!-- ====== FILTER BAR ====== -->
            <section class="bg-white border border-slate-200 rounded-xl p-4">
              <h3 class="text-sm font-semibold text-slate-700 mb-3">
                Tùy chọn báo cáo
              </h3>
              <div class="grid grid-cols-1 md:grid-cols-12 gap-3">
                <div class="md:col-span-5">
                  <select
                    id="reportScope"
                    class="w-full border border-slate-200 rounded-md px-3 py-2 text-sm"
                  >
                    <option value="personal">Báo cáo cá nhân</option>
                    <option value="unit">Báo cáo đơn vị</option>
                    <option value="department">Báo cáo phòng ban</option>
                  </select>
                </div>
                <div class="md:col-span-3">
                  <select
                    id="reportRange"
                    class="w-full border border-slate-200 rounded-md px-3 py-2 text-sm"
                  >
                    <option value="month">Tháng này</option>
                    <option value="quarter">Quý này</option>
                    <option value="year">Năm nay</option>
                    <option value="last6">6 tháng gần đây</option>
                  </select>
                </div>
                <div class="md:col-span-4">
                  <button
                    id="btnPickRange"
                    type="button"
                    class="w-full flex items-center justify-center gap-2 border border-slate-200 rounded-md px-3 py-2 text-sm hover:bg-slate-50"
                    title="Chọn khoảng thời gian tuỳ chỉnh"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-4 h-4"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      aria-hidden="true"
                    >
                      <path d="M3 5h18M6 12h12M10 19h4" />
                    </svg>
                    Chọn khoảng thời gian
                  </button>
                </div>
              </div>
            </section>

            <!-- ====== TOP KPIs ====== -->
            <section
              class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-4 lg:gap-6"
            >
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <div class="flex items-start justify-between">
                  <h3 class="text-[13px] font-semibold text-slate-600">
                    Tỷ lệ hoàn thành
                  </h3>
                  <span
                    class="inline-grid w-7 h-7 rounded-full place-items-center border border-slate-200"
                    >✔️</span
                  >
                </div>
                <div class="pt-2">
                  <div
                    class="text-3xl font-bold text-emerald-600"
                    id="kpiCompleteRate"
                  >
                    19%
                  </div>
                  <div class="text-[13px] text-slate-500">
                    Văn bản &amp; công việc
                  </div>
                </div>
              </article>
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <div class="flex items-start justify-between">
                  <h3 class="text-[13px] font-semibold text-slate-600">
                    Hiệu suất xử lý
                  </h3>
                  <span
                    class="inline-grid w-7 h-7 rounded-full place-items-center border border-slate-200"
                    >⏱</span
                  >
                </div>
                <div class="pt-2">
                  <div class="text-3xl font-bold text-blue-700" id="kpiOnTime">
                    73%
                  </div>
                  <div class="text-[13px] text-slate-500">Đúng thời hạn</div>
                </div>
              </article>
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <div class="flex items-start justify-between">
                  <h3 class="text-[13px] font-semibold text-slate-600">
                    Văn bản xử lý
                  </h3>
                  <span
                    class="inline-grid w-7 h-7 rounded-full place-items-center border border-slate-200"
                    >📄</span
                  >
                </div>
                <div class="pt-2">
                  <div class="text-3xl font-bold">
                    <span id="docDone">4</span>/<span id="docTotal">15</span>
                  </div>
                  <div class="text-[13px] text-slate-500">Đã hoàn thành</div>
                </div>
              </article>
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <div class="flex items-start justify-between">
                  <h3 class="text-[13px] font-semibold text-slate-600">
                    Công việc trễ hạn
                  </h3>
                  <span
                    class="inline-grid w-7 h-7 rounded-full place-items-center border border-slate-200"
                    >⚠️</span
                  >
                </div>
                <div class="pt-2">
                  <div class="text-3xl font-bold text-rose-600" id="taskLate">
                    6
                  </div>
                  <div class="text-[13px] text-slate-500">Cần xử lý gấp</div>
                </div>
              </article>
            </section>

            <!-- ====== CHARTS ROW 1 ====== -->
            <section class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- Bar chart -->
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <header class="mb-2">
                  <h3 class="text-sm font-semibold">
                    Thống kê văn bản theo tháng
                  </h3>
                  <p class="text-xs text-slate-500">
                    Số lượng văn bản đến, đi và đã xử lý trong 6 tháng gần đây
                  </p>
                </header>
                <div class="h-[320px]">
                  <canvas
                    id="barDocs"
                    aria-label="Biểu đồ cột văn bản"
                  ></canvas>
                </div>
              </article>
              <!-- Pie chart -->
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <header class="mb-2">
                  <h3 class="text-sm font-semibold">
                    Phân bố trạng thái công việc
                  </h3>
                  <p class="text-xs text-slate-500">
                    Tỷ lệ các công việc theo trạng thái hiện tại
                  </p>
                </header>
                <div class="grid place-items-center h-[320px]">
                  <div class="w-[88%] max-w-sm">
                    <canvas
                      id="pieTasks"
                      aria-label="Biểu đồ tròn công việc"
                    ></canvas>
                  </div>
                </div>
              </article>
            </section>

            <!-- ====== CHARTS ROW 2 + DETAILS ====== -->
            <section class="mt-6">
              <!-- Line -->
              <article class="bg-white border border-slate-200 rounded-xl p-4">
                <header class="mb-2">
                  <h3 class="text-sm font-semibold">
                    Xu hướng hiệu suất làm việc
                  </h3>
                  <p class="text-xs text-slate-500">
                    Theo dõi hiệu suất và chất lượng công việc qua các tuần
                  </p>
                </header>
                <div class="h-[340px]">
                  <canvas
                    id="linePerf"
                    aria-label="Biểu đồ đường hiệu suất"
                  ></canvas>
                </div>
              </article>

              <!-- Detail panels -->
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6">
                <!-- Documents detail -->
                <article
                  class="bg-white border border-slate-200 rounded-xl p-4"
                >
                  <h3 class="text-sm font-semibold mb-3">
                    Chi tiết thống kê văn bản
                  </h3>
                  <p class="text-xs text-slate-500 mb-3">
                    Phân tích chi tiết về xử lý văn bản
                  </p>
                  <div class="space-y-3">
                    <!-- Đã xử lý -->
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Văn bản đã xử lý</span><span>4/15</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 27%"
                        ></div>
                      </div>
                    </div>
                    <!-- Đang xử lý -->
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Văn bản đang xử lý</span><span>5/15</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 33%"
                        ></div>
                      </div>
                    </div>
                    <!-- Chưa xử lý -->
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Văn bản chưa xử lý</span><span>6/15</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 40%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="grid grid-cols-3 gap-3 mt-5">
                    <div class="text-center rounded-lg bg-emerald-50 py-3">
                      <div class="text-emerald-700 font-bold text-xl">11</div>
                      <div class="text-xs text-emerald-700">Đúng hạn</div>
                    </div>
                    <div class="text-center rounded-lg bg-rose-50 py-3">
                      <div class="text-rose-600 font-bold text-xl">4</div>
                      <div class="text-xs text-rose-600">Trễ hạn</div>
                    </div>
                    <div class="text-center rounded-lg bg-blue-50 py-3">
                      <div class="text-blue-700 font-bold text-xl">A</div>
                      <div class="text-xs text-blue-700">Xếp hạng</div>
                    </div>
                  </div>
                </article>

                <!-- Tasks detail -->
                <article
                  class="bg-white border border-slate-200 rounded-xl p-4"
                >
                  <h3 class="text-sm font-semibold mb-3">
                    Chi tiết thống kê công việc
                  </h3>
                  <p class="text-xs text-slate-500 mb-3">
                    Phân tích chi tiết về thực hiện công việc
                  </p>
                  <div class="space-y-3">
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Công việc hoàn thành</span><span>0/6</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 0%"
                        ></div>
                      </div>
                    </div>
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Đang thực hiện</span><span>1/6</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 17%"
                        ></div>
                      </div>
                    </div>
                    <div>
                      <div
                        class="flex items-center justify-between text-xs mb-1"
                      >
                        <span>Chưa bắt đầu</span><span>3/6</span>
                      </div>
                      <div
                        class="h-2 rounded-full bg-slate-200 overflow-hidden"
                      >
                        <div
                          class="h-full bg-slate-800"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="grid grid-cols-3 gap-3 mt-5">
                    <div class="text-center rounded-lg bg-blue-50 py-3">
                      <div class="text-blue-700 font-bold text-xl">0%</div>
                      <div class="text-xs text-blue-700">Tỷ lệ hoàn thành</div>
                    </div>
                    <div class="text-center rounded-lg bg-amber-50 py-3">
                      <div class="text-amber-700 font-bold text-xl">6</div>
                      <div class="text-xs text-amber-700">Trễ hạn</div>
                    </div>
                    <div class="text-center rounded-lg bg-emerald-50 py-3">
                      <div class="text-emerald-700 font-bold text-xl">A</div>
                      <div class="text-xs text-emerald-700">Xếp hạng</div>
                    </div>
                  </div>
                </article>
              </div>
            </section>
          </div>
        </main>
      </div>
    </div>

    <!-- ========================= FOOTER ========================= -->
    <div data-include="footer"></div>

    <!-- Toast placeholder -->
    <div class="toast" aria-live="polite"></div>

    <!-- App script (toast, helpers dùng lại) -->
    <script src="../assets/js/api.js"></script>
    <script src="../assets/js/layout.js"></script>
    <script src="../assets/js/lanhdao.js"></script>

    <!-- Page charts script -->
    
  </body>
</html>
